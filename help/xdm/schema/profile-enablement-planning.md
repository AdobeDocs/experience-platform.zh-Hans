---
keywords: Experience Platform；配置文件；实时客户配置文件；架构；数据集；规划；启用
solution: Experience Platform
title: 规划实时客户配置文件启用
description: 查看在为Real-time Customer Profile启用架构和数据集之前必须评估的主要注意事项。
source-git-commit: da40dfde57b17b6a7387451eec48569174ad544b
workflow-type: tm+mt
source-wordcount: '1820'
ht-degree: 0%

---

# 规划实时客户配置文件启用

使用此页可以确认您的架构和数据集是否已准备就绪，然后再为实时客户个人资料启用它们。 在设计架构字段之后但在为用户档案启用架构之前，完成此规划审查。 配置文件启用会将永久性行为更改应用于数据模型。 您不能撤消架构启用，并且启用数据集会影响如何在Real-time Customer Profile中处理其记录。 查看此指南，避免架构设计中存在意外启用、数据质量问题或长期限制。

启用配置文件可决定如何在Experience Platform中拼合、合并和激活数据。 Planning可在进行更改之前，确保架构结构、身份配置和数据集用途正确无误。 完成此规划审查后，您可以继续在&#x200B;**[!UICONTROL Schema Editor]**&#x200B;或&#x200B;**[!UICONTROL Dataset]** UI中为配置文件启用数据。

## 先决条件

在使用本规划指南之前，请确保您已：

* 使用&#x200B;**[!UICONTROL Schema Editor]**&#x200B;或架构注册表API设计了架构。 请参阅[架构创建教程](../tutorials/create-schema-ui.md)以开始操作。
* 在架构中至少配置了一个标识字段。 有关说明，请查阅[标识字段配置指南](../ui/fields/identity.md)。
* 基本了解[实时客户资料](../../profile/home.md)以及它如何使用架构构建统一的客户视图。
* 为配置文件启用架构和数据集的相应权限。 如果您无权访问配置文件启用选项，请联系您的系统管理员。

如果您尚未完成这些先决条件，请先启动[架构创建教程](../tutorials/create-schema-ui.md)，然后再继续阅读本规划指南。

## 为什么规划很重要 {#why-planning-matters}

配置文件启用会永久更改Experience Platform处理数据的方式。 以下永久更改适用于架构和数据集。

**架构**：为配置文件启用架构时，无法禁用或删除它。 摄取数据后，您也无法从架构中删除或重命名字段。 这种持久性意味着在启用配置文件之前，架构设计必须完整且稳定，因为您不能在以后撤消决策或简化结构。

**数据集**：为配置文件启用数据集时，Real-time Customer Profile使用其记录来生成和更新配置文件。 在[数据集用户指南](../../catalog/datasets/enable-for-profile.md)中查看数据集启用行为。 与架构不同，您可以稍后禁用或删除数据集，但这样做会删除关联的配置文件记录，并且可能影响分段或激活工作流。 在对启用的数据集进行更改之前，请考虑下游影响。

由于这些更改会影响下游进程，因此在启用架构及其数据集之前，请验证它们是否适用于配置文件。

### 了解启用工作流

您必须为配置文件启用架构和使用该架构的数据集。 按以下顺序启用资源：

1. **为配置文件**&#x200B;启用架构：首先，在&#x200B;**[!UICONTROL Schema Editor]**&#x200B;的架构中启用配置文件。 这允许为配置文件启用使用此架构的任何数据集。
2. **为个人资料启用单独的数据集**：启用架构后，对应该有助于统一客户个人资料的每个数据集启用个人资料。

无法为配置文件启用数据集，如果其架构尚未启用。 架构是数据集启用的先决条件。 此两步流程可确保在Real-time Customer Profile开始处理记录之前验证您的数据模型。

## 何时为用户档案启用架构或数据集 {#when-to-enable}

查看以下条件以确认用户档案启用适用于您的数据。

在以下情况下启用配置文件：

* 数据有助于形成统一的客户个人资料。
* 分段或激活工作流需要数据。
* 架构包括表示人员或客户级别键的身份字段。
* 数据集包含必须跨渠道拼合的体验事件或配置文件属性。 查看[XDM ExperienceEvent类](../classes/experienceevent.md)以确认事件要求。

## 当没有为配置文件启用架构或数据集时 {#when-not-to-enable}

在以下情况下避免启用Profile：

* 架构表示查找或仅引用数据。
* 数据集包含测试、临时或非生产数据。
* 数据不识别人员或仅用于报表。
* 该架构是实验性的，或者在结构上不完整。

在这些情况下启用配置文件可能会创建不必要的配置文件、增加许可证使用率或引入长期架构限制。

## 启用配置文件之前的主要注意事项 {#key-considerations}

查看此部分中的注意事项，确保您的架构和数据集支持用户档案用例和长期数据管理。 在启用配置文件之前，请验证您的架构结构、身份配置和数据集用途。

### 模式就绪性

查看架构结构，确认其支持配置文件要求。 架构必须包含分段和激活所需的字段，但排除实验性字段或不需要长期保留的字段。 请记住，在启用后添加的任何其他字段必须是可加的（有关详细信息，请参阅[架构不可变性约束](#why-planning-matters)）。 此限制意味着，在启用配置文件之前，您应该仔细验证字段选择。 有关允许更新的详细信息，请参阅[架构演化规则](./composition.md#evolution)。

### 身份配置

身份配置确定配置文件如何跨数据集拼合记录。 首先确认选择了有效的主要身份 — 此字段必须稳定、唯一且在所有记录中填充一致。 验证是否正确分配了身份命名空间，以防止拼接错误。 如果您使用辅助身份，请确认他们支持您的用例，而不会导致配置文件冲突，当不同的个人共享相同的身份值时，可能会发生配置文件冲突。 实时客户配置文件通过应用合并策略来解决冲突，合并策略可确定在将冲突的记录拼合在一起时哪些数据优先。

### 数据集用途

仅当配置文件数据集直接贡献给下游工作流中使用的配置文件属性或体验事件时，才为配置文件启用数据集。 避免启用包含未在分段、测试或样本数据或系统生成的不用于激活的操作记录中使用的查找或参考数据的数据集。 这些数据类型不会对统一客户配置文件产生任何影响，也不会产生不必要的存储开销。 如果数据集不包含支持分段和激活的身份字段或客户行为数据，请不要为配置文件启用它。

**示例**：

您可以启用一个“客户购买事件”数据集，其中包含具有客户ID的交易数据。 Real-time Customer Profile使用这些事件构建客户时间表并根据购买行为启用分段。

您不能启用仅包含没有客户标识符的SKU引用数据的“产品目录”数据集。 启用这种类型的数据集会产生不必要的存储开销，而不会影响统一的客户用户档案。

## 预启用核对清单 {#pre-enablement-checklist}

在为配置文件启用架构或数据集之前，使用此核对清单确认就绪情况。 在启用配置文件之前，完成每个项目。

### 架构级别检查

首先验证架构设计是否完整且稳定。 检查您的架构，确认用例的所有必填字段都存在，并且不包含实验或临时字段。 请参阅[架构设计最佳实践](./best-practices.md)以确保您的架构遵循建议的模式。 获得团队对最终字段列表的批准（请参阅[架构不可变性约束](#why-planning-matters)）。

接下来，验证您的主要身份配置是否正确。 在&#x200B;**[!UICONTROL Schema Editor]**&#x200B;中打开架构，并找到标有身份图标的字段。 确认源数据中始终填充了此字段，并且身份命名空间适用于您的用例。 主标识必须稳定、唯一且可靠地存在于所有记录中，以确保正确的用户档案拼接。

最后，确认您不需要重命名或重新组织架构结构。 架构结构更改仅限于附加更新（请参阅[架构不可变性约束](#why-planning-matters)）。 以后无法更正命名或组织中的任何长期模糊性，因此请在启用之前解决这些问题。

### 数据集级别检查

对于您计划启用的每个数据集，首先要确认它包含与配置文件相关的数据。 查看样本记录，以验证它们是否包含客户或事件数据，而不是纯粹的操作或参考信息。 确保记录中包含链接到客户个人资料的标识值。 不应为配置文件启用没有标识字段或客户行为数据的数据集。

通过了解数据集的身份值与您启用了个人资料的环境中的其他数据集之间的关系，确定数据集是否应该有助于身份拼接或分段。 考虑此数据集中的记录应该与现有用户档案拼合还是创建新的用户档案片段。 查看[合并策略文档](../../profile/merge-policies/overview.md)，了解实时客户配置文件如何跨数据集拼合记录，以及此数据集如何适应您的整体身份策略。

在启用数据集之前，请估计它包含的唯一身份值的数量，并验证这些身份值是否代表实际客户，而不是测试帐户或系统标识符。 确认启用此数据集将符合您的许可证授权，因为每个唯一标识都会贡献您的可寻址受众规模。 配置文件启用会增加存储和处理成本，因此请确保数据集能提供合理投资所需的价值。

完成此核对清单有助于防止出现启用后无法撤销的问题。

## 为架构和数据集启用配置文件 {#enable-profile}

完成预启用核对清单后，请按照以下步骤启用配置文件。 如[了解启用工作流](#why-planning-matters)中所述，在启用使用该架构的任何数据集之前，必须启用该架构。

### 为配置文件启用架构

首先在您的架构上启用配置文件：

1. 在Experience Platform UI中导航到&#x200B;**[!UICONTROL Schemas]**。
2. 从列表中选择架构以在&#x200B;**[!UICONTROL Schema Editor]**&#x200B;中将其打开。
3. 选择右边栏中的&#x200B;**[!UICONTROL Profile]**&#x200B;切换开关。 架构属性面板显示确认对话框。
4. 选择&#x200B;**[!UICONTROL Enable]**&#x200B;以确认。 该架构现在已为配置文件启用。

有关详细说明，请参阅架构编辑器文档中的[架构启用指南](../ui/resources/schemas.md#profile)。

### 为配置文件启用数据集

为配置文件启用架构后，启用应有助于生成统一配置文件的每个数据集：

1. 在Experience Platform UI中导航到&#x200B;**[!UICONTROL Datasets]**。
2. 从列表中选择一个数据集以打开数据集详细信息页面。
3. 选择右边栏中的&#x200B;**[!UICONTROL Profile]**&#x200B;切换开关。 数据集属性面板将更新，以显示配置文件已启用。

对应贡献到Real-time Customer Profile的每个数据集重复此过程。 有关详细说明和API启用选项，请参阅先决条件部分中引用的数据集用户指南。

### 为什么顺序很重要

如[了解启用工作流](#why-planning-matters)中所述，在启用数据集之前，必须启用架构。 这可确保Real-time Customer Profile在允许数据集启用之前验证架构结构支持用户档案操作，并确保使用该架构的所有数据集都继承用于分段和身份拼接的正确字段定义。

在启用架构和数据集后，Real-time Customer Profile将开始处理记录并构建统一的客户配置文件。 除非重新摄取数据，否则在启用之前摄取的记录不会包含在配置文件中。

## 后续步骤 {#next-steps}

您已查看配置文件启用的永久影响，确认您的架构和数据集已就绪，并验证您的身份配置支持您的用例。 为了加深您对架构结构和字段关系的了解，请查看架构组合的[基础知识](../schema/composition.md)，其中说明了架构演化规则以及字段在数据模型内如何交互。 如果您在启用期间或启用之后遇到问题，请参阅[XDM疑难解答指南](../troubleshooting-guide.md)以了解常见问题和解决方案。 要了解有关身份命名空间如何影响配置文件拼接和解析的更多信息，请查看[身份命名空间概述](../../identity-service/features/namespaces.md)。
