---
title: 核心扩展的发行说明
description: Adobe Experience Platform中核心扩展的最新发行说明。
exl-id: a049b2d5-7a00-435d-bcc7-112658a53a1e
source-git-commit: 0955646164269d868be5161a117c6e12dbd9a4cb
workflow-type: tm+mt
source-wordcount: '1654'
ht-degree: 55%

---

# 核心扩展发行说明

>[!NOTE]
>
>Adobe Experience Platform Launch已在Adobe Experience Platform中重新命名为一套数据收集技术。 因此，产品文档中的术语有一些改动。有关术语更改的综合参考，请参阅以下[文档](../../../term-updates.md)。

## 2023 年 3 月 29 日

v3.4.1

* 添加新的Web本机委托事件：
   * Keydown
   * KeyUp
* 添加了针对以下代理测试多个值（“添加其他”选项）的功能：
   * 事件
      * 更改
   * 条件
      * Cookie
      * 登陆页面
      * 查询字符串参数
      * 流量源
      * Variable
* 更改events/EntersViewport委托以使用 [交集观察器API](https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API) 而不是手动检测进入视区的元素。
* 删除将DTM Cookie迁移到LocalStorage的代码。
* 当LocalStorage API和SessionStorage API不可用时，将警告记录到控制台。

## 2022 年 1 月 4 日

v3.3.0

* 更改 [触发直接调用操作](./overview.md#direct-call-action) 以便提供要发送到直接调用规则的自定义事件信息。

## 2021 年 10 月 8 日

v3.2.2

* 修复了所有可用运算符的条件值数据元素JSON模式。
* 修复https://github.com/adobe/reactor-extension-core/issues/64。

## 2021 年 9 月 23 日

v3.2.1

* 修复了条件值数据元素视图初始化在字段值为0时无法正常工作的错误。

## 2021 年 9 月 23 日

v3.2.0

条件值数据元素中引入了以下更改：

* 为条件值和回退值添加复选框，允许用户选择是否希望未定义为返回值。
* 数字值将作为数字在设置对象中显示。
* 不再需要条件值，它的行为方式与回退值相同。

## 2021年9月17日

v3.1.1

* 修复了阻止加载日期范围条件视图的JS错误。

## 2021 年 9 月 16 日

v3.1.0

添加了新数据元素：

* 合并对象 — 选择多个数据元素，每个数据元素将提供一个对象。 这些对象将深度（递归）合并在一起，以生成新对象。
* 条件值 — 根据比较结果返回两个值（conditionalValue或fallbackValue）中的一个。
* 运行时环境 — 返回以下Launch环境变量之一：环境阶段，库生成日期，属性名称，属性ID，规则名称，规则ID，事件类型，事件详细信息有效负荷，直接调用标识符。
* JavaScript工具 — 常用JavaScript操作的包装器：基本字符串操作（替换、子字符串、正则表达式匹配、第一个和最后一个索引、拆分、切片）、基本数组操作（切片、连接、弹出、移位）和基本通用操作（切片、长度）。
* 设备属性 — 返回设备属性，如窗口大小或屏幕大小。

## 2021 年 8 月 11 日

v3.0.0

* PDCL-6153:添加了对为缓存的自定义代码操作可靠地提取完全限定URL的支持。

核心扩展的v3.0.0与 [Turbine Web运行时的v27.2.0](https://github.com/adobe/reactor-turbine/releases/tag/v27.2.0)，如果用户的公司支持Premium CDN，则允许用户在许多Adobe管理的托管区域中加载其库。

对于没有Premium CDN的用户，此升级是可选的，并且向后兼容，对于在其公司中启用了Premium CDN的客户，此升级是必选的。

## 2021 年 5 月 20 日

v2.0.7

* 修复了文本输入上的鼠标交互无法继续正常工作的问题。
* 弃用浏览器和操作系统条件的使用。

## 2021年5月4日

v2.0.6

* 对修复当屏幕大小更改时扭曲的图标进行了细微更新。

## 2021 年 3 月 11 日

v2.0.5

* 更新了具有延迟选项（现在支持v2.0.4版本中添加的数据元素值）的事件和操作在运行时评估中的代码，以将字符串正确强制为数字。

## 2021年3月9日

v2.0.4

* 为各个字段添加了数据元素支持 — 向以下事件添加了数据元素支持：“页面逗留时间”、“Enters Viewport”、“悬停”和“媒体播放时间”。 以及以下条件：“网站逗留时间”和“值比较”
* 使用“链接延迟”时，为Ctrl/cmd +单击和鼠标中键单击添加了对默认行为的支持
* **将点击事件的链接延迟标记为“不再支持”。**  — 有关更多信息，请参阅 [数据收集博客](https://experienceleaguecommunities.adobe.com/t5/adobe-experience-platform-launch/explainer-link-delay/ba-p/398403) 对于Adobe Experience Platform

## 2021 年 1 月 6 日

v1.9.0

* **新的“触发直接调用”操作** - 核心扩展现在包含一个名为 `Trigger Direct Call` 的新操作类型。当您想要通过其他规则中的操作来触发直接调用规则时，可使用该选项。它将直接映射到 `_satellite.track()` 方法。衷心感谢 [Jan Exner](https://twitter.com/jexner) 为此做出的贡献。

## 2020 年 12 月 8 日

v1.8.4

* 修复了用户无法清除或取消设置 CSP nonce 的错误。

## 2020 年 7 月 28 日

v1.8.3

* 修复了在扩展启动时 CSP nonce 只被读取一次，而不是在自定义代码操作调用期间被刷新的错误。

## 2020 年 7 月 13 日

v1.8.2

* 修复了以下错误：对于包含无标记名称（例如，注释）的令牌的 HTML 代码，自定义代码操作会引发错误。

## 2020 年 7 月 10 日

v1.8.1

* 修复了以下错误：`script` 和 `style` 标记属性内的自定义 HTML 实体在写入页面之前未正确解码。
* 修复了以下错误：外部自定义代码操作没有内容时出现错误。外部自定义代码操作是从与库不同的文件中加载的操作（触发规则的事件不是 libraryLoaded 或 pageBottom 时，会发生这种情况）

## 2020 年 7 月 6 日

v1.8.0

* **自定义代码中的 Promise** - 自定义代码条件和不在全局范围中执行的 JavaScript 操作现在可以返回 Promise。您可以通过承诺让后续条件和操作等待自定义代码中的异步进程完成，然后再转到下一个项目。
* **HTML 自定义代码操作中的回调** - 在 HTML 自定义代码操作中，您可以使用 `onCustomCodeSuccess()` 和 `onCustomCodeFailure()` 回调实现相同结果。

有关更多详细信息，请参阅“条件”>“自定义代码和操作”>“自定义代码”中的[核心扩展参考](./overview.md)。

## 2020 年 4 月 7 日

v1.7.3

* **文本字段长度增加** - 文本输入字段已更改为 Flex 布局，以便更好地利用用户的屏幕宽度，并为较长的文本字符串提供更多空间。

## 2019 年 11 月 1 日

v1.7.0

* **在自定义代码数据元素中访问 `event` 变量** - 现在，在规则的上下文中运行时，您可以从自定义代码数据元素中引用事件。该对象将包含有关触发规则的事件的有用信息。衷心感谢 [Stewart Schilling](https://twitter.com/sdi_stewart) 对此所做的贡献。

## 2019 年 10 月 7 日

v1.6.2

* **新的“Constant”数据元素类型** - 核心扩展现在包含一个名为 `Constant` 的新数据元素类型。当您需要存储将在各种条件、操作或自定义代码中引用的常数值时，可以使用该数据元素。衷心感谢 [Jan Exner](https://twitter.com/jexner) 对此所做的贡献。

## 2019 年 9 月 11 日

v1.6.1

* **支持 CSP Nonce** - 现在，核心扩展有一个可选配置参数。您可以添加引用 nonce 的数据元素。如果已配置，则标记添加到页面的所有内联脚本都将使用您配置的nonce。 此更改支持使用包含nonce的内容安全策略，以便仍然可以在CSP环境中加载标记脚本。 您可以阅读有关将标记与CSP结合使用的更多信息 [此处](../../../ui/client-side/content-security-policy.md).

## 2019 年 6 月 18 日

v1.5.0

* **直接调用日志记录** - 现在，直接调用规则的浏览器日志记录在传递时将提供更多详细信息。

## 2019 年 5 月 8 日

v1.4.3

* **输入字段** - 输入字段的长度现已大幅增加！
* **自定义事件** - 现在，可对从窗口调度的事件使用自定义事件类型。
* **错误修复** - 修复了值比较条件无法接受 0 值的错误。
* **错误修复** - exchange\_url 字段已进行更新，以便您现在可在 Adobe Exchange 中看到核心扩展列表。

## 2019 年 1 月 8 日

v1.4.2

* **Enters Viewport 事件** - 以前，Enters Viewport 事件只会在一个页面上触发一次。现在，可以将此行为配置为每次元素进入视区时均触发。
* **Custom Event 事件** - Custom Event 现在可以包含能够在条件和操作中使用的上下文数据。
* **Click 事件** - 现在，如果在 Click 事件上设置了链接延迟，该链接延迟将在锚点子项上正确注册，而不只是在锚点自身上注册。

## 2018 年 11 月 8 日

* **Persist Cohort 选项** - 在 Sampling 条件中添加了用于持久保留同类群组的选项。这样可以使用户在不同的会话中保留处于样本同类群组之内或之外。例如，如果选中“persist cohort”复选框并且在第一次为给定访客运行条件时返回 true，则以后每次为同一访客运行该条件都将返回 true。同样，如果选中“persist cohort”复选框并且在第一次为给定访客运行条件时返回 false，则以后每次为同一访客运行该条件都将返回 false。
* **错误修复**  — 修复了以下问题：在标记同步加载但安装有误(无调用 `_satellite.pageBottom()`)将清除网站内容。
* **错误修复**  — 修复了以下问题：如果标记库异步加载并在浏览器DOMContentLoaded事件触发后完成加载，则Enters Viewport将无法正常运行。

## 2018 年 5 月 24 日

* **功能** - 添加了 Value Comparison 条件，以便可以使用若干可用运算符中的任意运算符比较两个值。此条件取代了之前多个太过于具体的条件功能。
* **功能** - 添加了 Max Frequency 条件，此条件允许您指定在某个时间段或事件发生期间条件应返回 true 的次数。示例：每天 5 次，每次访问 2 次。

## 2018 年 4 月 11 日

* **功能** - 数据元素现在可以引用其他数据元素。

## 2018 年 3 月 20 日

* **错误修复** - 自定义代码窗口在异步部署中抛出 `document.write` 错误且无法正常执行
* **错误修复** - 主模块未包含在库中
* **错误修复** -“随机数”数据元素出现最小值和最大值问题

## 2018 年 1 月 10 日

* **功能** -“随机数”数据元素
* **功能** -“页面信息”数据元素
* **功能** - Date 条件
* **功能** - Sampling 条件
