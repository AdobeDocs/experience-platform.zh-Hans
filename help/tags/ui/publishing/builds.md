---
title: 内部版本
description: 了解内部版本的概念以及它们在Adobe Experience Platform中的运行方式。
exl-id: af899282-aa2d-4395-8dbd-18d91be3f041
source-git-commit: 44e2b8241a8c348d155df3061d398c4fa43adcea
workflow-type: tm+mt
source-wordcount: '746'
ht-degree: 51%

---

# 内部版本

内部版本是一组文件，其中包含在客户端设备上运行的所有代码。

它是您在库中指定的更改以及之前已提交、已批准或已发布的所有内容的组合。

内部版本包含相互引用的客户端代码文件。可使用您为库选择的环境和主机将这些文件传送到您的托管位置。您在网站上部署的代码将指向该同一位置，这样当用户访问您的网站或应用程序时，便可以加载这些文件。

## 文件内容

库定义了应包含在其中的一组精选标记资源（扩展、规则和数据元素）。

内部版本包含为库中包含的资源提供支持所需的所有模块代码（由扩展开发人员提供）和配置（由您输入）。 例如，如果扩展提供了未在规则中使用的操作，则用于执行这些操作的代码不会包含在内部版本中。

内部版本分为主库文件以及潜在的许多较小文件。主库文件可在嵌入代码中引用，并在运行时加载到页面。主库文件包含：

* 规则引擎
* 所有扩展配置
* 所有数据元素代码和配置
* 所有规则事件代码和配置
* 所有条件代码和配置
* 任何将“库已加载”或“页面底部”作为事件的规则的事件代码和配置（因为我们知道我们即将需要它）。

较小文件包含根据需要加载到页面上的各个操作的代码和配置。当触发规则并评估其条件，进而需要执行操作时，系统将从其中一个较小文件中检索该特定操作的必需代码和配置。 这意味着页面上只会加载执行必要操作所需的代码，以便尽可能减小主库文件。

## 文件格式

内部版本的默认文件格式是一个文件包，其中包含您的扩展、数据元素和规则以您希望的方式运行所需的所有代码。

但是，在某些情况下，您可能更希望格式为文件的 .zip 存档，而不是可执行的客户端代码文件。例如，如果您自行托管内部版本并希望在另一个部署中使用该内部版本，则可能需要创建存档。如果在库字段的自托管路径中提供了任何内容，则可以保存环境。 除了新代码外，指向已存档下载的链接也会变得可用。生成库后，您可以选择将zip文件部署到Akamai，然后从`assets.adobedtm.com/...`下载它。

>[!NOTE]
>
>在生成内部版本之前，该位置中不存在任何内容。

无论文件格式如何，生成的内部版本始终都会传递到主机指定的位置。

要完成生成操作，请选择一个库，然后选择发布过程中该级别可用的生成选项（Build for Development、Build for Staging 等）。

## 缩小

通过缩小，可以从文件中去除执行操作不需要的数据，从而降低带宽成本并提高运行速度。

为了提高性能，Experience Platform将缩小所有内容，包括：

* 主标记库
* 扩展开发人员提供的作为扩展一部分的模块代码
* Experience Platform用户提供的自定义代码

>[!NOTE]
>
>如果您的模块代码和自定义代码已经缩小，Experience Platform仍会再次缩小它们。 第二次缩小没有其他好处，但也不会造成任何损害，它可以简化Experience Platform，使其更易于维护。

提供的任何客户端代码都指向代码的缩小版本。 这在遵循缩小文件的标准命名约定的文件名中可见：

`launch-%environment_id%.min.js`

如果要查看未缩小的代码，请从文件名中删除.min：

`launch-%environment_id%.js`

如果扩展开发人员为其扩展提供缩小的代码，则Experience Platform不会在未缩小的内部版本中提供未缩小的代码。 同样，如果Experience Platform用户将缩小的代码放入自定义代码框中，则该代码在未缩小的内部版本中仍为缩小版本。 Experience Platform不会缩小任何内容。

有关缩小的详细信息，请参阅[此栈栈路径文章](https://blog.stackpath.com/glossary/minification/)。

在执行生成时，它将先构建未缩小的库，然后一次缩小整个库。
