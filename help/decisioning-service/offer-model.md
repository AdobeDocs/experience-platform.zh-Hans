---
keywords: Experience Platform;home;popular topics
solution: Experience Platform
title: 优惠决策域模型
topic: overview
translation-type: tm+mt
source-git-commit: fdaef24a23c1c1da064ca33e8bed522e506fead5

---


# 优惠决策域模型概述

优惠决策是决策服务的一个使用案例，您可在其中规范和集中管理用于吸引客户与优惠互动的规则和预测。 优惠决策被视为一种内容决 _**策类型**_。 在此用例中，决 _**策选项**_ 称为优惠, _****_&#x200B;其特征是附加到这些选项的内容。 有关决策服务所使用的对象模型的介绍，请参阅决策 [服务域模型](experience-model.md)。

目标是根据目标标准、成本和频率约束以及包括先前提议的优惠在内的渠道之间的先前交互，在任何渠道中向最终用户提供“最佳优惠”。

与所有决策用例一样，决策选项(优惠)在由任意数量的应用程序共享的资源中进行管理。 优惠可以由贵组织的不同部门或合作伙伴创建，这些优惠可以每天添加和删除。

优惠通过提供体验的应用程序以可视方式融入更大的体验中。 _**位置**_（有时称为点或槽位）是制定战略的重要组件。 设计优惠策略通常与这些位置的定义开始。 优惠通常具有多 _**个内容表示**_ ，因此可以正确地集成到各种体验中，其中每个体验具有不同的维度或其他约束并且需要不同的媒体格式。

优惠经常与实物货物或服务有关联，并涉及成本计算。 一个组织需要能够限制优惠消耗的资源，因此需要能够限 _****_ 制优惠建议的总次数。

组织接受的优惠的预测值是优化标准，并与优惠的成本相抵触。 成本、接受的可能性和预测值被用于对优惠进行排序。 “最佳优惠”是对您的优惠活动目标具有最高预期正面影响的“最佳”。

优惠决策考虑到最终用户在多个 _**渠道和应用程序中进行的交互**_ ，它利用了最终用户的用户档案和体验事件数据。 例如，呼叫中心应用程序可以使用优惠决策来根据最终用户进行的购买和发布的审阅来启用或禁止优惠;或者，电子邮件管理应用程序可以依赖优惠决策根据网站上的浏览历史记录在每周新闻稿中选择“下一个最佳优惠”。

优惠还有其他有趣的特性。 通常，当计划有 _**效**_ ，并且优惠需要失效时，会有一个定义的优惠或日期和时间范围。

最后，优惠的吸引力随其提出频率而变差。 一项在反复提出后不能接受的优惠是一个丧失的机会，因为本可以提出不同的优惠。 因此，必须对最终用户 _**疲劳**_ 进行管理。

## 优惠决策策略一览表

总体方法是缩小优惠的选择范围，直到满足所有约束，然后将排名模型应用于剩余的选项，然后使用限制约束（重复消除和避免回退选择）跨多个活动优化。

| 策略组件 | 已实现为 |
| --- | --- |
| 决策活动 | 优惠活动 |
| 决策选项 | 优惠内容表示 |
| 回退选项 | 使用内容表示的备份优惠 |
| 有限决策选项集 | 优惠清单(例如优惠库) |
| 局部类别 | 基于标签和优惠标识符的优惠过滤器 |
| 决定产出 | 每个活动一个优惠的主张，一次多个活动 |
| 决策结果 | 预期的体验事件与优惠相关，例如 `eventType='opened'` |
| 决策算法 | 内部服务逻辑，参数化 |
| 限制 | 位置约束、日历约束、全局约束和每用户限制约束、重复数据消除约束 |
| 决策规则 | 合格规则 |
| 期望实用程 *序的型号* | 优惠等级或优先级 |

期权库存中的优惠总数通常相当大（约10,000秒），每个优惠活动可能侧重于属于不同类别（主题）的优惠。 优惠决策策略允许将优惠过滤器附加到优惠活动。 将在要求作出决定时评估其他限制因素。
以下各节详细解释了优惠决策域的组件。

## 一般优惠

一般优惠，也称为个性化优惠，是优惠决策活动的核心选择。 它们具有名称和状态等属性。 状态属性指示实体是否已准备好包含在有效的已批准列表中。 一般优惠将添加多个限制。 有关此内容的更多信息，请参阅‎下面的约 [束部分](#offer-constraints)。

## 优惠中的内容

### 优惠位置

版面定义内容限制，并与活动一起使用，以指定提供下一个最佳体验的位置。 这进一步减少了可考虑的选项的数量，并且是活动施加的另一个约束。 这称为放置约束。 将仅考虑内容满足放置限制的选项，如优惠。 这是在决策战略的初期阶段进行评估的。 当选项对象更改每个活动的放置约束时，将重新评估每个活动的放置约束，并且一个或多个的选项可能考虑或退出该选项。

决策服务不负责将内容依赖关系的复杂细节正规化。 相反，每个客户将识别所有渠道的版面列表，并为这些版面提供唯一标识符和名称。 通过引用特定位置，设计人员声明给定的内容将适合该位置。

开发内容时，优惠营销人员和内容设计人员将只（必须）同意“主页英雄图像”或“服务呼叫开始脚本”后面的“默示合同”。 前者可以作为宽度为600px、高度为350px的图像达成一致，后者可能将内容限制为两种语言变体中的文本，这两种语言变体在具有语义结构的三句或四句中不超过50个单词。 放置以不存储隐藏合同的所有含义。

### 优惠呈现

要确保在优惠中位置的可变参数中正确显示渠道，必须创建该优惠的不同表示形式。 附加到优惠的内容按位置分组。 每个优惠可以具有一个或多个表示，其中每个表示引用定义的位置之一。 优惠中的每个表示必须使用不同的放置。 优惠的表示越多，就越有机会在不同的放置上下文中使用优惠。

“放置”(Placement)可限制可添加到“表示”(Representation)的内容项的类型。

## 备用优惠

备用优惠是除版面规则之外没有其他约束的决策选项。 回退优惠具有与位置相关的内容表示形式，就像任何其他优惠一样。

在活动中指定备用优惠，以指示当组合约束取消所有缩小选项的限制时，可以使用的可行内容体验。 由于它不依赖于运行时上下文或用户档案，因此在装配活动时，可以提前检查放置约束。 使用备用优惠，始终可以回答以下问题：目前最佳优惠是什么？

## 优惠约束

### 日历约束

在优惠决策域中，优惠具有有效期。 这意味着优惠不能在开始日期和时间过去之前提出，也不能在结束日期和时间过去之后再提出。 优惠实体具有定义这些日历约束的简单结构。

过期的优惠将定期从列表考虑的选项中删除。 但是，在请求决策时，日历过滤器直接应用，以便精确地应用约束。

### 封闭约束

优惠可以具有可选的上限限制。 它包含两个值：

- 全局上限值限制在整个优惠集(目标受众)中建议的用户档案频率。

- 每用户档案上限并确定向同一用户档案建议该优惠的频率。

### 复制限制

当请求决策时，客户可以同时请求多个活动的建议。 这是内容决策中的典型场景。 每个活动为整体体验提供一个或多个内容选项。 由于构成方面，决策需要跨活动进行仲裁以避免重复，除非活动从整体期权库存的脱节子集中选出一个。 一个高级选项很可能会在所有活动中排名高位，如果所有活动都提出同样的选项，那么这个选项将是糟糕的经验。 另一方面，如果投放系统想了解所有渠道的“下一最佳转换”是什么，并且没有限制，则可以在不同活动中提出相同的选项。

复制约束当前未写入业务对象存储库。 相反，重复数据消除是运行时的默认策略。 请求参数可以覆盖默认行为以禁止重复数据消除步骤。

### 用户档案限制-合格规则

到目前为止，所讨论的约束已经适用，无论选择优惠的对象是谁。 体验决策还支持一个用例，其中个性化命题基于客户的记录和时间序列事件。 根据用户档案评估规则，以确定优惠是否符合条件或必须禁止该用户使用。 为此，合格规则可以与每个优惠相关联。 除了最终用户的用户档案和体验事件之外，合格规则还将考虑实时上下文数据。 该数据由投放服务提供，并可以采用与用户档案无关的数据形式，例如库存水平、天气状况、飞行计划。

区分定位和细分规则以及决策资格和优先级规则非常重要。 对于定位一组用户档案是资格的输出(受众选择)，一组选项(允许的优惠)是评估的输出。

## 优惠集合

库存是考虑用于决策的整个选项池。 库存可以进一步分为类别或集合。 选项集合由这些选项具有的公用标签表示。 过滤器用于测试优惠是否属于某个特定类别，或更具体地说，是否共享相同的标签。

### 标记

标记提供了一种表示一组选项属于某个类别的方法。

一个选项可以有多个标签，因此可以同时在多个类别中。 类别也可以重叠或包含另一个。 当类别“S”由标有“A”的优惠定义，类别“R”由标有“A”和“B”的选项定义时，“S”将是“R”的超集。

### 过滤器

过滤器用于为属于类别的一组选项定义条件。 过滤器可以被视为对一般优惠库存的查询。 有两种基本的过滤器形成方法：声明优惠有一个或多个标记，并明确选择优惠集。 前一种方法可以配置为声明该集合中的优惠必须具有所有指定标记，或者当该选项至少具有一个指定标记时该选项符合条件。

将选项显式置入集合时，该集合将忽略其标记集。

## 优惠活动

活动配置和控制决策过程。 目前，决策策略主要是预先确定的，但未来的迭代优惠决策域模型将允许选择模型、附加规则和约束。

体验可以同时使用许多活动组合。 目前，在一个决策请求中最多可解决30个活动。 如果体验中超过30个活动或插槽必须填入内容，则可以对同一用户档案发出多个请求。 但是，当同一决定请求中包括活动时，将在这些活动之间执行重复数据消除。

如果活动的定义方式是从脱节的优惠集中进行选择，那么无论将活动合并到同一请求中还是拆分到单独的请求中，都没有什么区别。 但是，网络和响应时间限制可能要求将活动组合到同一请求中。 由于不同的请求可能被路由到不同的服务节点，因此可能需要将相同的用户档案数据读入不同的节点。 这降低了可用于其他请求的有效IO带宽。

活动用于将内容插入体验。 为便于（不确保）内容项目能够正确“适合”,活动引用单个位置。 注意，位置并不总是一个具体的位置／槽位，但更像这些位置／槽位的抽象。 例如，在拼贴网格的网页中，每个拼贴可以受相同位置的约束，假设它们都具有相似的形状和大小，并且可以保存类似的内容。 但是，单个拼贴通常由其自己的活动提供。

下图说明了业务实体之间的相互关系：

![](./images/figure-10.png)

当客户端创建并链接对象图以作出决策时，通常会有三个不同的工作流。 这些说明如下：

- 设置标记和位置等支持实体。 这些实体用于构造、过滤和分组其他实体。 它们还用于在第二和第三工作流之间提供一些协调。 此工作流构成了一些前期工作，但可以在任何给定时间对设置进行细化。 尽管标记相对简单，但放置位置需要稍微加以规划。 企业至少需要对提交决策的所有地点进行清点。

- 使用各种表示和业务规则（约束）创建优惠。 此中心工作流程提供了选择最佳工作流所需的选项。 第一个工作流的标记用于对优惠进行分类，而位置用于指示可以显示哪些选项以及显示位置。

   - 此工作流还为优惠定义绝对约束。 它们是绝对的，因为它们将始终得到执行，并且不仅会影响一组优惠中的排名。 例如，设置日历约束时，将强制在设置的优惠日期／时间之前、结束日期／时间之后，从不选择开始。 在此工作流中将设置的约束是日历约 [束](#calendar-constraints)、 [上限约束](#capping-constraints)[和](#profile-constraints---eligibility-rules)资格约束。 此处的子工作流是确定谁有资格接收给定优惠的附加规则的定义。

      - 同时为优惠创建约束，并选择其表示。 此工作流假定内容已在某个位置创建，并且只是上传到内容存储库并从内容存储库中选取。 此处是第一个工作流中的位置发挥作用的地方。 优惠可以选择版面并关联该版面下的 [内容](#offer-placements)。

      - 创建合适的备用优惠是此工作流程的最后一步。 回退优惠与无约束的常规优惠非常相似。

- 最后一个工作流涉及创建活动。 但是，此步骤不一定在创建优惠的工作流之后按顺序进行。 这两个进程都在进行中并且处于并发状态。 活动用于按主题和作出决定的地点缩小选项的范围。 活动引用集 [合](#offer-collections) 和位置。 它还必须指定在 [无法确定合格优惠](#fallback-offers) 时使用的回退优惠。

