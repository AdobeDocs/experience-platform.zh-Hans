---
keywords: Experience Platform；配置文件；实时客户配置文件；故障诊断；护栏；准则；限制；实体；主实体；维度实体；
title: 实时客户资料数据的防护
solution: Experience Platform
product: experience platform
type: Documentation
description: Adobe Experience Platform提供了一系列防护，帮助您避免创建实时客户资料无法支持的数据模型。 本文档概述了在建模用户档案数据时要记住的最佳实践和限制。
exl-id: 33ff0db2-6a75-4097-a9c6-c8b7a9d8b78c
source-git-commit: c351ee91367082cc5fbfc89da50aa2db5e415ea8
workflow-type: tm+mt
source-wordcount: '1962'
ht-degree: 1%

---

# [!DNL Real-time Customer Profile]数据的防护

[!DNL Real-time Customer Profile] 提供了各个配置文件，使您能够根据行为分析和客户属性提供个性化的跨渠道体验。为了实现此定位，[!DNL Profile]和Adobe Experience Platform内的分段引擎使用高度异常的混合数据模型，该模型为开发客户用户档案提供了一种新方法。 使用此混合数据模型时，收集的数据必须正确建模。 虽然[!DNL Profile]数据存储维护配置文件数据不是关系存储，但[!DNL Profile]允许与小维度实体集成，以便以简单直观的方式创建区段。 此集成称为多实体分段。

Adobe Experience Platform提供了一系列防护，以帮助您避免创建[!DNL Real-time Customer Profile]不支持的数据模型。 本文档概述了在使用用户档案数据进行分段时的以下防护、最佳实践和限制。

>[!NOTE]
>
>本文档中概述的护栏和限制正在不断改进。 请定期查看以获取最新信息。

## 快速入门

建议您在尝试构建数据模型以在[!DNL Real-time Customer Profile]中使用之前，先阅读以下Experience Platform服务文档。 使用数据模型和本文档中概述的护栏，需要了解与管理[!DNL Real-time Customer Profile]实体相关的各种Experience Platform服务：

* [[!DNL Real-time Customer Profile]](home.md):根据来自多个来源的汇总数据提供统一的实时客户资料。
* [Adobe Experience Platform Identity服务](../identity-service/home.md):通过在将不同数据源引入时桥接其身份，支持创建“客户的单一视图” [!DNL Platform]。
* [[!DNL Experience Data Model (XDM)]](../xdm/home.md):Platform用来组织客户体验数据的标准化框架。
   * [架构组合的基础知识](../xdm/schema/composition.md):介绍模式和Experience Platform中的数据建模。
* [Adobe Experience Platform Segmentation Service](../segmentation/home.md):中的分段引擎， [!DNL Platform] 用于根据客户行为和属性根据客户配置文件创建受众区段。
   * [多实体分段](../segmentation/multi-entity-segmentation.md):有关创建区段的指南，这些区段将维度实体与用户档案数据相集成。

## 实体类型

[!DNL Profile]存储数据模型由两种核心实体类型组成：

* **主实体：** 主实体或配置文件实体，可将数据合并在一起，为个人构成“单一真相来源”。此统一数据使用称为“并集视图”的表示。 并集视图将实现同一类的所有架构的字段聚合到单个并集架构中。 [!DNL Real-time Customer Profile]的并集架构是非规范的混合数据模型，充当所有配置文件属性和行为事件的容器。

   与时间无关的属性（也称为“记录数据”）使用[!DNL XDM Individual Profile]进行建模，而时间系列数据（也称为“事件数据”）则使用[!DNL XDM ExperienceEvent]进行建模。 在Adobe Experience Platform中摄取记录和时间系列数据时，它会触发[!DNL Real-time Customer Profile]以开始摄取已启用供其使用的数据。 摄取的交互和详细信息越多，个人用户档案就越可靠。

   ![](images/guardrails/profile-entity.png)

* **Dimension实体：** 您的组织还可以定义XDM类来描述个人以外的内容，如商店、产品或资产。这些非[!DNL XDM Individual Profile]架构称为“维实体”，不包含时间系列数据。 Dimension实体提供查找数据，这有助于并简化多实体区段定义，并且必须足够小，以便分段引擎能够将整个数据集加载到内存中，以实现最佳处理（快速点查找）。

   ![](images/guardrails/profile-and-dimension-entities.png)

## 限制类型

在定义数据模型时，建议保留在提供的护栏内，以确保性能正确并避免系统错误。

本文档中提供的护栏包括两种限制类型：

* **软限制：** 软限制提供了最佳系统性能的建议最大值。在不中断系统或接收错误消息的情况下，可以超出软限制，但超出软限制将导致性能降低。 建议保持在软限制内，以避免整体性能下降。

* **硬限制：** 硬限制为系统提供绝对最大值。超出硬限制将导致中断和错误，从而阻止系统按预期运行。

## 配置文件片段

在本文档中，有几个护栏是指“配置文件片段”。 在Experience Platform中，多个配置文件片段会合并在一起，以形成实时客户配置文件。 每个片段表示给定数据集内该ID的唯一主标识以及相应的记录或事件数据。 要了解有关配置文件片段的更多信息，请参阅[配置文件概述](home.md#profile-fragments-vs-merged-profiles)。

## 数据模型护栏

创建数据模型以与[!DNL Real-time Customer Profile]一起使用时，建议遵循以下护栏。

### 主实体护栏

| 瓜德拉伊 | 限制 | 限制类型 | 描述 |
| --- | --- | --- | --- |
| 启用了用户档案的数据集数量 | 20 | 柔和 | **联合架构最多可能包含20个数 [!DNL Profile] 据集。** 要为其启用其他数 [!DNL Profile]据集，应首先删除或禁用现有数据集。20个Adobe集限制包含来自其他数据集解决方案(例如，Adobe Analytics)的数据集。 |
| 为配置文件启用的Adobe Analytics报表包数据集数量 | 1 | 柔和 | **配置文件最多应启用一(1)个Analytics报表包数据集。** 尝试为配置文件启用多个Analytics报表包数据集，可能会对数据质量产生意想不到的后果。有关更多信息，请参阅本文档附录中[Adobe Analytics数据集](#aa-datasets)的部分。 |
| 建议的多实体关系数 | 5 | 柔和 | **建议在主要实体和维度实体之间最多定义5个多实体关系。** 在删除或禁用现有关系之前，不应进行其他关系映射。 |
| 多实体关系中使用的ID字段的最大JSON深度 | 4 | 柔和 | **在多实体关系中使用的ID字段，建议的最大JSON深度为4。** 这意味着在高度嵌套的架构中，深度超过4级的字段不应用作关系中的ID字段。 |
| 配置文件片段中的数组基数 | &lt;=500 | 柔和 | **配置文件片段（与时间无关的数据）中的最佳数组基数是  &lt;>** |
| ExperienceEvent中的数组基数 | &lt;=10 | 柔和 | **ExperienceEvent（时间系列数据）中的最佳数组基数是  &lt;>** |
| 单个配置文件身份图的身份计数限制 | 50 | 硬 | **单个配置文件的身份图表中的最大身份数为50。** 任何身份超过50个的配置文件都将从分段、导出和查找中排除。 |

### Dimension实体护栏

| 瓜德拉伊 | 限制 | 限制类型 | 描述 |
| --- | --- | --- | --- |
| 非[!DNL XDM Individual Profile]实体不允许使用时序数据 | 0 | 硬 | **配置文件服务中的非实体不允[!DNL XDM Individual Profile] 许使用时序数据。** 如果某个时间系列数据集与一个非ID[!DNL XDM Individual Profile] 关联，则不应为启用该数 [!DNL Profile]据集。 |
| 无嵌套关系 | 0 | 柔和 | **您不应在两个非架构之间创建[!DNL XDM Individual Profile] 关系。** 对于不属于并集架构的任何架构，不建议使用创建关系 [!DNL Profile] 的功能。 |
| 主ID字段的最大JSON深度 | 4 | 柔和 | **主ID字段的建议最大JSON深度为4。** 这意味着在高度嵌套的架构中，如果某个字段的深度超过4个级别，则不应选择该字段作为主ID。位于第4个嵌套级别的字段可用作主ID。 |

## 数据大小护栏

以下护栏是指数据大小，为确保可按预期摄取、存储和查询数据，建议使用这些护栏。

>[!NOTE]
>
>摄取时，数据大小以JSON中的未压缩数据衡量。

### 主实体护栏

| 瓜德拉伊 | 限制 | 限制类型 | 描述 |
| --- | --- | --- | --- |
| 最大ExperienceEvent大小 | 10KB | 硬 | **事件的最大大小为10KB。** 将继续摄取，但将删除任何大于10KB的事件。 |
| 最大配置文件记录大小 | 100KB | 硬 | **配置文件记录的最大大小为100KB。** 将继续摄取，但将删除大于100KB的配置文件记录。 |
| 配置文件片段最大大小 | 50MB | 硬 | **单个配置文件片段的最大大小为50MB。** 对于任何大于50MB的配置文件片段，分段、导 [出和](#profile-fragments) 查找可能会失败。 |
| 最大配置文件存储大小 | 50MB | 柔和 | **存储的配置文件的最大大小为50MB。** 向大于50 [MB](#profile-fragments) 的配置文件中添加新的配置文件片段将影响系统性能。例如，配置文件可以包含一个50MB的片段，或者它可以跨多个总大小为50MB的数据集包含多个片段。 尝试存储单个片段大于50MB的配置文件，或多个片段总大小超过50MB的片段，将影响系统性能。 |
| 每天摄取的配置文件或ExperienceEvent批次数 | 90 | 柔和 | **每天摄取的配置文件或ExperienceEvent批次数上限为90个。** 这意味着每天摄取的配置文件和ExperienceEvent批次的合计总数不能超过90个。摄取其他批次将影响系统性能。 |

### Dimension实体护栏

| 瓜德拉伊 | 限制 | 限制类型 | 描述 |
| --- | --- | --- | --- |
| 所有维实体的最大总大小 | 5 GB | 柔和 | **所有维度实体的建议最大总大小为5 GB。** 摄取大维度实体将导致系统性能降低。例如，不建议尝试将10GB产品目录作为维度实体进行加载。 |
| 每维实体架构的数据集 | 5 | 柔和 | **建议最多5个与每个维度实体架构关联的数据集。** 例如，如果为“产品”创建架构并添加五个贡献数据集，则不应创建与产品架构绑定的第六个数据集。 |
| 每天摄取的维度实体批次数 | 每个实体4个 | 柔和 | **每天摄取的维度实体批次的最大数量为每个实体4个。** 例如，您每天最多可以摄取4次产品目录更新。为同一实体摄取其他维度实体批次将影响系统性能。 |

## 分段护栏

本节中概述的防护是指组织在Experience Platform内可创建的区段的数量和性质，以及将区段映射和激活到目标的过程。

| 瓜德拉伊 | 限制 | 限制类型 | 描述 |
| --- | --- | --- | --- |
| 每个沙盒的最大区段数 | 10K | 柔和 | **组织可创建的区段最大数量为每个沙盒1万个。** 一个组织总共可以有10,000个以上的区段，但前提是每个单个沙盒中的区段少于10,000个。尝试创建其他区段将导致系统性能降低。 |
| 每个沙盒的最大流区段数 | 500 | 柔和 | **组织可以创建的流区段的最大数量为每个沙盒500个。** 一个组织总共可以有500个以上的流区段，但前提是每个沙箱中的流区段少于500个。尝试创建其他流区段将导致系统性能降低。 |
| 每个沙盒的批处理区段的最大数量 | 1万 | 柔和 | **组织可以创建的批量区段最大数量为每个沙盒1万个。** 一个组织总共可以拥有10,000个以上的批处理区段，但前提是每个沙箱中的批处理区段少于10,000个。尝试创建其他批处理区段将导致系统性能降低。 |

## 附录

此部分提供了有关各个护栏的更多详细信息。

### Adobe Analytics Platform中的报表包数据集 {#aa-datasets}

配置文件最多应启用一(1)个Adobe Analytics报表包数据集。 这是一个软限制，这意味着您能够为用户档案启用多个Analytics数据集，但不建议使用，因为它可能会对您的数据产生意想不到的后果。 这是由于体验数据模型(XDM)架构之间存在差异所致。XDM架构为Experience Platform中的数据提供语义结构，并允许数据解释保持一致，而eVar和转化变量在Adobe Analytics中具有可自定义的性质。

例如，在Adobe Analytics中，一个组织可能具有多个报表包。 如果报表包A将eVar4指定为“内部搜索词”，而报表包B将eVar4指定为“反向链接域”，则这两个值都将被摄取到配置文件中的同一字段中，从而造成混淆并降低数据质量。
